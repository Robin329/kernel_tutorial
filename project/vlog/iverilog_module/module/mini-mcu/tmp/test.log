KCPSM6 Assembler log file for program 'F:\home\iverilog_module\module\mini-mcu\tmp\test.psm'.
Generated by KCPSM6 version v2.70
Ken Chapman - Xilinx Ltd - 16th May 2014

Assembly datestamp: 28 May 2021
Assembly timestamp: 22:49:39

Contents
  Assembly listing
  List of PSM files
  List of CONSTANTs
  List of TABLEs
  List of STRINGs
  List of line labels
  Instruction usage statistics


Last occupied address: 402 hex
Nominal program memory size: 2K (2048)   address(10:0)
Actual memory size: 4096
  (Default memory size)
Occupied memory locations: 86
Memory locations available: 4010


Assembly listing

 Addr Code                   Instruction

 000                         ;ç³»ç»Ÿæ—¶é’Ÿä¸º12MHz
 000                         ;ç›®æ ‡ç¡¬ä»¶ä¸º å°è„šä¸«FPGA step-maxo2-cï¼Œè¿™ä¸ªå‹å·æ˜¯Uç›˜æ¨¡å¼ï¼Œæµæ–‡ä»¶ä¼šä¸‹è½½åˆ°mcuï¼Œæ¯æ¬¡ä¸Šç”µç”±mcué…ç½®FPGA
 000                         ;-----------------------------------------------------------------
 000                         ; åŠŸèƒ½è¯´æ˜ : åœ¨ä¸æ“ä½œçš„æƒ…å†µä¸‹ï¼Œæµæ°´ç¯ä¼šä¸€ç›´è·‘ï¼ŒåŒæ—¶æ•°ç ç®¡æ¯ç§’åŠ 1ï¼Œ
 000                         ; æ»¡99åå½’é›¶
 000                         ; æŒ‰ä¸‹æŒ‰é”®1 ï¼š æ•°ç ç®¡ä¸‹ä¸€æ¬¡å°†ä» 01 å¼€å§‹è®¡æ•°
 000                         ; æŒ‰ä¸‹æŒ‰é”®2 ï¼š æ•°ç ç®¡ä¸‹ä¸€æ¬¡å°†ä» 02 å¼€å§‹è®¡æ•°
 000                         ; æŒ‰ä¸‹æŒ‰é”®3 ï¼š æ•°ç ç®¡ä¸‹ä¸€æ¬¡å°†ä» 03 å¼€å§‹è®¡æ•°
 000                         ; æŒ‰ä¸‹æŒ‰é”®4 ï¼š æ•°ç ç®¡ä¸‹ä¸€æ¬¡å°†ä» 04 å¼€å§‹è®¡æ•°
 000                         ;-----------------------------------------------------------------
 000                         CONSTANT sw_port, 00         ;å®šä¹‰æŒ‰é”®å››æ®µæ‹¨ç å¼€å…³  ã€æŒ‰é”® ï¼š å¼€å…³ ã€‘
 000                         ;è¾“å‡º
 000                         CONSTANT seg_port, 00        ;å®šä¹‰æ•°ç ç®¡åœ°å€
 000                         CONSTANT led_port, 01        ;å®šä¹‰led_portä¸ºå¸¸é‡01
 000                         CONSTANT rgb_port, 02        ; rgbç¯
 000                         ;å®šä¹‰ä»¥ä¸€äº›å˜é‡
 000                         CONSTANT var_seg, 00         ;æ•°ç ç®¡
 000                         CONSTANT var_led, 01         ; led
 000                  start: 
 000  01AFE                  LOAD sA, FE                  ;  ledç­‰æ§åˆ¶
 001  2DA01                  OUTPUT sA, 01[led_port]
 002  2FA01                  STORE sA, 01[var_led]
 003  01B66                  LOAD sB, 66                  ; åˆå§‹åŒ–æ•°ç ç®¡æ˜¾ç¤º
 004  2FB00                  STORE sB, 00[var_seg]
 005  2DB00                  OUTPUT sB, 00[seg_port]
 006  01C07                  LOAD sC, 07[00000111'b]      ; ' rgb ç­
 007  2DC02                  OUTPUT sC, 02[rgb_port]      ;rgbä¸äº®
 008  09D00                  INPUT sD, 00[sw_port]        ; è¯»ä¸€æ¬¡ioå£
 009  28001                  ENABLE INTERRUPT             ;ä½¿èƒ½ä¸­æ–­
 00A                         ;ä¸€ä¸‹loopå¾ªç¯æ˜¯æ‰«æå¼æŒ‰é”®æ£€æµ‹çš„ä¸»å¾ªç¯
 00A                   loop: 
 00A  09D00                  INPUT sD, 00[sw_port]
 00B  14D06                  SL0 sD
 00C  3E029                  JUMP NC, 029[key4]           ;æŒ‰ä¸‹äº†å‡†å¤‡key4å‡½æ•°
 00D  14D06                  SL0 sD
 00E  3E022                  JUMP NC, 022[key3]           ;æŒ‰ä¸‹äº†å‡†å¤‡key3å‡½æ•°
 00F  14D06                  SL0 sD
 010  3E01B                  JUMP NC, 01B[key2]           ;æŒ‰ä¸‹äº†å‡†å¤‡key2å‡½æ•°
 011  14D06                  SL0 sD
 012  3E014                  JUMP NC, 014[key1]           ;æŒ‰ä¸‹äº†å‡†å¤‡key1å‡½æ•°
 013  2200A                  JUMP 00A[loop]               ;å›å»ç»§ç»­æ‰«æ
 014                         ;--------------------------------------------
 014                         ;æ‰«æå¼æŒ‰é”®æ£€æµ‹å“åº”
 014                         ;--------------------------------------------
 014                   key1: 
 014  20030                  CALL 030[delay_10ms]         ;æŒ‰é”®æ¶ˆæŠ–ï¼Œå»¶æ—¶10ms
 015  09E00                  INPUT sE, 00[sw_port]
 016  0DE10                  TEST sE, 10
 017  3A00A                  JUMP C, 00A[loop]
 018  01E00                  LOAD sE, 00
 019  2FE00                  STORE sE, 00[var_seg]        ;æŒ‰ä¸‹äº†key1è®©æ•°ç ç®¡æ˜¾ç¤º01
 01A  2200A                  JUMP 00A[loop]
 01B                   key2: 
 01B  20030                  CALL 030[delay_10ms]
 01C  09E00                  INPUT sE, 00[sw_port]
 01D  0DE20                  TEST sE, 20
 01E  3A00A                  JUMP C, 00A[loop]
 01F  01E01                  LOAD sE, 01
 020  2FE00                  STORE sE, 00[var_seg]        ;æŒ‰ä¸‹äº†key2è®©æ•°ç ç®¡æ˜¾ç¤º02
 021  2200A                  JUMP 00A[loop]
 022                   key3: 
 022  20030                  CALL 030[delay_10ms]
 023  09E00                  INPUT sE, 00[sw_port]
 024  0DE40                  TEST sE, 40
 025  3A00A                  JUMP C, 00A[loop]
 026  01E02                  LOAD sE, 02
 027  2FE00                  STORE sE, 00[var_seg]        ;æŒ‰ä¸‹äº†key3è®©æ•°ç ç®¡æ˜¾ç¤º03
 028  2200A                  JUMP 00A[loop]
 029                   key4: 
 029  20030                  CALL 030[delay_10ms]
 02A  09E00                  INPUT sE, 00[sw_port]
 02B  0DE80                  TEST sE, 80
 02C  3A00A                  JUMP C, 00A[loop]
 02D  01E03                  LOAD sE, 03
 02E  2FE00                  STORE sE, 00[var_seg]        ;æŒ‰ä¸‹äº†key4è®©æ•°ç ç®¡æ˜¾ç¤º04
 02F  2200A                  JUMP 00A[loop]
 030                         ;--------------------------------------------
 030                         ;12MHzçš„ç³»ç»Ÿæ—¶é’Ÿä¸‹å»¶æ—¶10ms
 030                         ;--------------------------------------------
 030  01200      delay_10ms: LOAD s2, 00                  ;   ==> 10000 *1.2
 031  0112E                  LOAD s1, 2E
 032  010E0                  LOAD s0, E0
 033  22038                  JUMP 038[software_delay]
 034                         ;--------------------------------------------
 034                         ;12MHzçš„ç³»ç»Ÿæ—¶é’Ÿä¸‹å»¶æ—¶200ms
 034                         ;--------------------------------------------
 034  01203     delay_200ms: LOAD s2, 03                  ;
 035  011A9                  LOAD s1, A9
 036  01080                  LOAD s0, 80
 037  22038                  JUMP 038[software_delay]
 038  00000  software_delay: LOAD s0, s0                  ;pad loop to make it 10 clock cycles (5 instructions), if clk 12MHz  --> 1/1.2 us
 039  19001                  SUB s0, 01
 03A  1B100                  SUBCY s1, 00
 03B  1B200                  SUBCY s2, 00
 03C  36038                  JUMP NZ, 038[software_delay]
 03D  25000                  RETURN 
 03E                         ;--------------------------------------------
 03E                         ;æ•°ç ç®¡è®¡æ•°å™¨ 0--99 å¾ªç¯è®¡æ•°æ˜¾ç¤º
 03E                         ;è¯¥å‡½æ•°ä¼šåœ¨ä¸­æ–­ä¸­è¢«è°ƒç”¨
 03E                         ;--------------------------------------------
 03E                seg_add: 
 03E  0BC00                  FETCH sC, 00[var_seg]
 03F  11C01                  ADD sC, 01                   ;æ•°ç ç®¡æ˜¾ç¤ºå€¼åŠ 1
 040  00BC0                  LOAD sB, sC
 041  03B0F                  AND sB, 0F                   ;
 042  1DB0A                  COMPARE sB, 0A               ;ä½å››ä½æ˜¯å¦ç­‰äº10
 043  3604A                  JUMP NZ, 04A[seg_add_return] ;ä¸ç­‰äº10å°±å‡†å¤‡è¿”å›æ˜¾ç¤ºï¼Œå¦åˆ™æ•´ä½“åŠ 6
 044  11C06                  ADD sC, 06
 045  00BC0                  LOAD sB, sC
 046  03BF0                  AND sB, F0
 047  1DBA0                  COMPARE sB, A0               ;é«˜4ä½æ˜¯å¦ç­‰äº10
 048  3604A                  JUMP NZ, 04A[seg_add_return] ;ä¸ç­‰äº10å°±å‡†å¤‡è¿”å›æ˜¾ç¤ºï¼Œå¦åˆ™æ•´ä½“å½’é›¶ï¼Œå‡†å¤‡é‡æ–°è®¡æ•°
 049  01C00                  LOAD sC, 00
 04A         seg_add_return: 
 04A  2DC00                  OUTPUT sC, 00[seg_port]
 04B  2FC00                  STORE sC, 00[var_seg]
 04C  25000                  RETURN 
 04D                         ;--------------------------------------------
 04D                         ;ledæµæ°´ç¯å¾ªç¯ç‚¹äº®
 04D                         ;è¯¥å‡½æ•°ä¼šåœ¨ä¸­æ–­ä¸­è¢«è°ƒç”¨
 04D                         ;--------------------------------------------
 04D                led_dis: 
 04D  0BA01                  FETCH sA, 01[var_led]
 04E  14A0C                  RR sA
 04F  2DA01                  OUTPUT sA, 01[led_port]
 050  2FA01                  STORE sA, 01[var_led]
 051  25000                  RETURN 
 052                         ;ä¸­æ–­å…¥å£åœ°å€  -- æ­¤å¤„å¿…é¡»è¿™æ ·å†™ï¼Œæˆ‘å†™çš„è„šæœ¬å¦‚æœæ£€æµ‹åˆ°ä½ ä½¿èƒ½äº†ä¸­æ–­ä¼šé»˜è®¤å»è¿™ä¸ªåœ°å€æ‰¾
 052                         ;æ‰¾åˆ°åå°†åœ°å€åŠ¨æ€è¿æ¥åˆ°å‰é¢ç¨‹åºçš„åœ°å€åé¢
 3FF                         ADDRESS 3FF
 3FF                    ISR: 
 3FF  28000                  DISABLE INTERRUPT            ;å…³é—­ä¸­æ–­å“åº”ï¼Œå‡†å¤‡å¤„ç†ä¸­æ–­çš„äº‹æƒ…
 400  2004D                  CALL 04D[led_dis]            ; led
 401  2003E                  CALL 03E[seg_add]            ; seg display
 402  29001                  RETURNI ENABLE


All unused memory locations contain zero (equivalent to 'LOAD s0, s0')



List of PSM files that have been assembled

F:\home\iverilog_module\module\mini-mcu\tmp\test.psm



List of defined constants

 CONSTANT name     Value        Source PSM File

 timestamp_hours   22'd         
 timestamp_minutes 49'd         
 timestamp_seconds 39'd         
 datestamp_year    21'd         
 datestamp_month   5'd          
 datestamp_day     28'd         
 NUL               00           
 BEL               07           
 BS                08           
 HT                09           
 LF                0A           
 VT                0B           
 CR                0D           
 ESC               1B           
 DEL               7F           
 DCS               90           
 ST                9C           
 sw_port           00           test.psm
 seg_port          00           test.psm
 led_port          01           test.psm
 rgb_port          02           test.psm
 var_seg           00           test.psm
 var_led           01           test.psm



No TABLEs defined



List of text strings

 STRING name       String         Source PSM File

 KCPSM6_version$   "v2.70"        
 datestamp$        "28 May 2021"  
 timestamp$        "22:49:39"     



List of line labels

   Label            Addr  Source PSM File

 * start            000   test.psm
   loop             00A   test.psm
   key1             014   test.psm
   key2             01B   test.psm
   key3             022   test.psm
   key4             029   test.psm
   delay_10ms       030   test.psm
 * delay_200ms      034   test.psm
   software_delay   038   test.psm
   seg_add          03E   test.psm
   seg_add_return   04A   test.psm
   led_dis          04D   test.psm
 * ISR              3FF   test.psm

      * Line label has not been referenced in any instructions.
        Hint - This may indicate unused code that could be
               removed to reduce the size of this program.



Instruction usage statistics

 Instruction    Instances

 LOAD             17
 STAR              -

 AND               2
 OR                -
 XOR               -

 ADD               2
 ADDCY             -
 SUB               1
 SUBCY             2

 TEST              4
 TESTCY            -
 COMPARE           2
 COMPARECY         -

 SL0               4
 SL1               -
 SLX               -
 SLA               -
 RL                -
 SR0               -
 SR1               -
 SRX               -
 SRA               -
 RR                1

 REGBANK           -

 INPUT             6
 OUTPUT            5
 OUTPUTK           -

 STORE             2
 FETCH             2

 DISABLE           1
 ENABLE            1
 RETURNI           1

 JUMP             18
 JUMP@             -
 CALL              6
 CALL@             -
 RETURN            3
 LOAD&RETURN       -

 HWBUILD           -



End of KCPSM6 log file.
